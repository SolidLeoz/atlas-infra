# Atlas MQTT ACL (mTLS + use_identity_as_username)
# Each CN can only write its own telemetry and read its own commands.
# Activated by default — see MOSQUITTO_ACL_FILE in .env

user atlas-core
topic readwrite devices/atlas-core/#

user atlas-lab
topic write devices/atlas-lab/#
topic read devices/atlas-lab/commands

user atlas-field
topic write devices/atlas-field/#
topic read devices/atlas-field/commands

user atlas-mobile
topic write devices/atlas-mobile/#
topic read devices/atlas-mobile/commands

# ✅ Telegraf collector — reads all device telemetry for aggregation into InfluxDB
user telegraf-collector
topic read devices/+/telemetry
topic read devices/+/sensors/#

# Optional IoT gateway client (if you issue a dedicated cert)
# user gateway-atlas-core
# topic write devices/atlas-core/telemetry
# topic read devices/atlas-core/commands
